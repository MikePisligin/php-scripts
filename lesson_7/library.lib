<?php

/* Функция открывает сессию для работы с интернет-магазином */
function startSession() {
 session_start();
}

/* Функция выполняет подключение к базе данных */
/* Возвращает объект, содержащий сведения о подключении */
function connectSQL() {
  $link = mysqli_connect('127.0.0.1', 'user1', 'Qwerty@345', 'shop');

  return $link;
}

/* Функция записывает в сессию ID фруктов */
function recordIdFruits ($link) {
 $sql = "select ID from fruits";
 $result = mysqli_query($link, $sql);
 while ($row = mysql_fetch_assoc($result))
 switch ($row['ID']) {
  case '1': $_SESSION['apple'] = $row['ID']; break;
  case '2': $_SESSION['pear'] = $row['ID']; break;
  case '3': $_SESSION['orange'] = $row['ID']; break;
  case '4': $_SESSION['banana'] = $row['ID']; break;
  case '5': $_SESSION['tangerine'] = $row['ID']; break;
  case '6': $_SESSION['grapefruit'] = $row['ID']; break;
  case '7': $_SESSION['lemon'] = $row['ID']; break;
  case '8': $_SESSION['peach'] = $row['ID']; break;
  case '9': $_SESSION['apricot'] = $row['ID']; break;
}
}

/* Функция создаёт галерею фотографий на главной странице */
/* Принимаемое значение - объект, содержащий данные из запроса к базе */
function Catalog($result) {

while ($row = mysqli_fetch_assoc($result)) {

    $path = $row["path"] . $row["name_file"];

    if (file_exists($path)) {
     echo "<a href=\"productCard.php?id=" . $row['ID'] . "\"><img src=\"" . $path . "\"></a>";
  }  else {
   echo "Файл с именем " . $path . " не существует!";
  }
 }

}

/* Функция отображает фотографию с оригинальными размерами на второстепенной странице */
/* Принимаемое значение - объект, содержащий данные из запроса к базе */
function drawPicture($result) {
  $row = mysqli_fetch_assoc($result);
  $path = $row['path'] . $row['name_file'];

  echo "<img src=\"" . $path . "\">";
}

/* Функция отображает заголовок на странице товара. */
function printPage ($fruit) {
 switch ($fruit) {
  case 1: echo "Яблоки"; break;
  case 2: echo "Груши"; break;
  case 3: echo "Апельсины"; break;
  case 4: echo "Бананы"; break;
  case 5: echo "Мандарины"; break;
  case 6: echo "Грейпфруты"; break;
  case 7: echo "Лимоны"; break;
  case 8: echo "Персики"; break;
  case 9: echo "Абрикосы"; break;
 }
}

/* Функция позволяет получить цену товара. */
function toPrice ($link) {

 $sql = "select price from fruits where id='" . $_GET['id'] . "'";  
 $result = mysqli_query($link, $sql); 

 $row = mysqli_fetch_assoc($result);

 return $row['price'];
}

/* Функция позволяет получить описание товара. */
function toDesc ($link) {

 $sql = "select description from fruits where id='" . $_GET['id'] . "'";  
 $result = mysqli_query($link, $sql); 

 $row = mysqli_fetch_assoc($result);
 echo $row['description'];
 return $row['description'];
}
?>
